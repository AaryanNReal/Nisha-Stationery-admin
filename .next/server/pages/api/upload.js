"use strict";(()=>{var e={};e.id=39,e.ids=[39],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},3207:(e,t,n)=>{n.r(t),n.d(t,{config:()=>y,default:()=>E,routeModule:()=>S});var r={};n.r(r),n.d(r,{config:()=>A,default:()=>m});var a=n(1802),i=n(7153),o=n(6249);let u=require("multiparty");var s=n.n(u);let l=require("@aws-sdk/client-s3"),p=require("fs");var c=n.n(p);let d=require("mime-types");var P=n.n(d);let f="noa-ecommerce";async function m(e,t){let n=new(s()).Form,{fields:r,files:a}=await new Promise((t,r)=>{n.parse(e,(e,n,a)=>{e&&r(e),t({fields:n,files:a})})}),i=new l.S3Client({region:"eu-north-1",credentials:{accessKeyId:process.env.S3_ACCESS_KEY,secretAccessKey:process.env.S3_SECRET_ACCESS_KEY}}),o=[];for(let e of a.file){let t=e.originalFilename.split(".").pop(),n=Date.now()+"."+t;await i.send(new l.PutObjectCommand({Bucket:f,Key:n,Body:c().readFileSync(e.path),ACL:"public-read",ContentType:P().lookup(e.path)||"application/octet-stream"}));let r=`https://${f}.s3.amazonaws.com/${n}`;o.push(r)}return t.json({links:o})}let A={api:{bodyParser:!1}},E=(0,o.l)(r,"default"),y=(0,o.l)(r,"config"),S=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/upload",pathname:"/api/upload",bundlePath:"",filename:""},userland:r})},7153:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},1802:(e,t,n)=>{e.exports=n(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=3207);module.exports=n})();